{"ast":null,"code":"import _objectSpread from\"/Users/soojinpark/Desktop/todo_list/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/soojinpark/Desktop/todo_list/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useRef,useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import{useForm}from\"react-hook-form\";import classes from\"../views/Login.module.css\";import logo from\"../assets/logo.png\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faUser,faLock}from\"@fortawesome/free-solid-svg-icons\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){// When the form is being submitted.\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),busy=_useState2[0],setBusy=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),emailErr=_useState4[0],setEmailErr=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),passwordErr=_useState6[0],setPasswordErr=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),loginErr=_useState8[0],setLoginErr=_useState8[1];var userRef=useRef();var navigate=useNavigate();var userIcon=/*#__PURE__*/_jsx(FontAwesomeIcon,{size:\"lg\",icon:faUser});var lockIcon=/*#__PURE__*/_jsx(FontAwesomeIcon,{size:\"lg\",icon:faLock});useEffect(function(){var getObj=localStorage.getItem(\"user_token\");// Check for valid token against api\ngetObj&&navigate(\"/home\");},[navigate]);var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit;var onSubmit=function onSubmit(data){setBusy(true);axios({method:\"post\",url:\"http://dev.rapptrlabs.com/Tests/scripts/user-login.php\",data:{email:data.email,password:data.password},headers:{\"Content-Type\":\"application/x-www-form-urlencoded\"}}).then(function(response){setBusy(false);localStorage.setItem(\"user_token\",response.data.user_token);navigate(\"/home\");}).catch(function(error){setLoginErr(\"Invalid Credentials\");setBusy(false);});};return/*#__PURE__*/_jsx(\"div\",{className:classes.mainContainer,children:/*#__PURE__*/_jsx(\"div\",{className:classes.container,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.mainBox,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.signinBox,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"sign in\"}),/*#__PURE__*/_jsx(\"div\",{className:classes.formContainer,children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),onChange:function onChange(e){if(e.target.id===\"email\"){var validRegex=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/;if(e.target.value.length>50||!e.target.value.match(validRegex)){setEmailErr(\"Invalid Email\");}else{setEmailErr(null);}}else if(e.target.id===\"password\"){if(e.target.value.length<4||e.target.value.length>16){setPasswordErr(\"Password must be at 4-16 characters long\");}else{setPasswordErr(null);}}},children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsxs(\"div\",{className:classes.inputForm,children:[/*#__PURE__*/_jsx(\"span\",{className:classes.inputIcon,children:userIcon}),/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"email\",placeholder:\"user@rapptrlabs.com\",id:\"email\",ref:userRef,autoComplete:\"off\",className:emailErr&&\"invalid\"},register(\"email\",{required:true,maxLength:{value:50}})))]}),emailErr&&/*#__PURE__*/_jsx(\"p\",{className:classes.errMsg,children:emailErr}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsxs(\"div\",{className:classes.inputForm,children:[/*#__PURE__*/_jsx(\"span\",{className:classes.inputIcon,children:lockIcon}),/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"password\",placeholder:\"Must be at least 4 characters\",id:\"password\",ref:userRef,autoComplete:\"off\",className:passwordErr&&\"invalid\"},register(\"password\",{required:true,minLength:{value:4},maxLength:{value:16}})))]}),passwordErr&&/*#__PURE__*/_jsx(\"p\",{className:classes.errMsg,children:passwordErr}),loginErr&&/*#__PURE__*/_jsx(\"p\",{className:classes.errMsg,children:loginErr}),/*#__PURE__*/_jsx(\"button\",{className:emailErr||passwordErr||busy?\"invalid-button\":\"\",disabled:emailErr||passwordErr||busy?true:false,children:\"Login\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.leftbox,children:[/*#__PURE__*/_jsx(\"img\",{className:classes.logo,src:logo,alt:\"logo\"}),/*#__PURE__*/_jsxs(\"h2\",{className:classes.title,children:[/*#__PURE__*/_jsx(\"span\",{className:classes.firstSpan,children:\"Rapptr\"}),/*#__PURE__*/_jsx(\"span\",{children:\" \"}),/*#__PURE__*/_jsx(\"span\",{className:classes.secondSpan,children:\"Labs\"})]}),/*#__PURE__*/_jsx(\"p\",{className:classes.leftboxText,children:\"From Idea to Adoption.\"})]})]})})});};export default Login;","map":{"version":3,"names":["React","useRef","useState","useEffect","useNavigate","useForm","classes","logo","FontAwesomeIcon","faUser","faLock","axios","Login","busy","setBusy","emailErr","setEmailErr","passwordErr","setPasswordErr","loginErr","setLoginErr","userRef","navigate","userIcon","lockIcon","getObj","localStorage","getItem","register","handleSubmit","onSubmit","data","method","url","email","password","headers","then","response","setItem","user_token","catch","error","mainContainer","container","mainBox","signinBox","formContainer","e","target","id","validRegex","value","length","match","inputForm","inputIcon","required","maxLength","errMsg","minLength","leftbox","title","firstSpan","secondSpan","leftboxText"],"sources":["/Users/soojinpark/Desktop/todo_list/src/views/Login.js"],"sourcesContent":["import React, { useRef, useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useForm } from \"react-hook-form\";\nimport classes from \"../views/Login.module.css\";\nimport logo from \"../assets/logo.png\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faUser, faLock } from \"@fortawesome/free-solid-svg-icons\";\nimport axios from \"axios\";\n\nconst Login = () => {\n  // When the form is being submitted.\n  const [busy, setBusy] = useState(false);\n  const [emailErr, setEmailErr] = useState(null);\n  const [passwordErr, setPasswordErr] = useState(null);\n  const [loginErr, setLoginErr] = useState(null);\n\n  const userRef = useRef();\n  const navigate = useNavigate();\n\n  const userIcon = <FontAwesomeIcon size=\"lg\" icon={faUser} />;\n  const lockIcon = <FontAwesomeIcon size=\"lg\" icon={faLock} />;\n\n  useEffect(() => {\n    const getObj = localStorage.getItem(\"user_token\");\n    // Check for valid token against api\n    getObj && navigate(\"/home\");\n  }, [navigate]);\n\n  const { register, handleSubmit } = useForm();\n\n  const onSubmit = (data) => {\n    setBusy(true);\n    axios({\n      method: \"post\",\n      url: \"http://dev.rapptrlabs.com/Tests/scripts/user-login.php\",\n      data: {\n        email: data.email,\n        password: data.password,\n      },\n      headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\n    })\n      .then(function (response) {\n        setBusy(false);\n        localStorage.setItem(\"user_token\", response.data.user_token);\n        navigate(\"/home\");\n      })\n      .catch(function (error) {\n        setLoginErr(\"Invalid Credentials\");\n        setBusy(false);\n      });\n  };\n\n  return (\n    <div className={classes.mainContainer}>\n      <div className={classes.container}>\n        <div className={classes.mainBox}>\n          <div className={classes.signinBox}>\n            <h1>sign in</h1>\n            <div className={classes.formContainer}>\n              <form\n                onSubmit={handleSubmit(onSubmit)}\n                onChange={(e) => {\n                  if (e.target.id === \"email\") {\n                    let validRegex =\n                      /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/;\n                    if (\n                      e.target.value.length > 50 ||\n                      !e.target.value.match(validRegex)\n                    ) {\n                      setEmailErr(\"Invalid Email\");\n                    } else {\n                      setEmailErr(null);\n                    }\n                  } else if (e.target.id === \"password\") {\n                    if (\n                      e.target.value.length < 4 ||\n                      e.target.value.length > 16\n                    ) {\n                      setPasswordErr(\n                        \"Password must be at 4-16 characters long\"\n                      );\n                    } else {\n                      setPasswordErr(null);\n                    }\n                  }\n                }}\n              >\n                <label htmlFor=\"email\">Email</label>\n                <div className={classes.inputForm}>\n                  <span className={classes.inputIcon}>{userIcon}</span>\n                  <input\n                    type=\"email\"\n                    placeholder=\"user@rapptrlabs.com\"\n                    id=\"email\"\n                    ref={userRef}\n                    autoComplete=\"off\"\n                    className={emailErr && \"invalid\"}\n                    {...register(\"email\", {\n                      required: true,\n                      maxLength: {\n                        value: 50,\n                      },\n                    })}\n                  />\n                </div>\n                {emailErr && <p className={classes.errMsg}>{emailErr}</p>}\n\n                <label htmlFor=\"password\">Password</label>\n                <div className={classes.inputForm}>\n                  <span className={classes.inputIcon}>{lockIcon}</span>\n                  <input\n                    type=\"password\"\n                    placeholder=\"Must be at least 4 characters\"\n                    id=\"password\"\n                    ref={userRef}\n                    autoComplete=\"off\"\n                    className={passwordErr && \"invalid\"}\n                    {...register(\"password\", {\n                      required: true,\n                      minLength: {\n                        value: 4,\n                      },\n                      maxLength: {\n                        value: 16,\n                      },\n                    })}\n                  />\n                </div>\n                {passwordErr && <p className={classes.errMsg}>{passwordErr}</p>}\n\n                {loginErr && <p className={classes.errMsg}>{loginErr}</p>}\n                <button\n                  className={\n                    emailErr || passwordErr || busy ? \"invalid-button\" : \"\"\n                  }\n                  disabled={emailErr || passwordErr || busy ? true : false}\n                >\n                  Login\n                </button>\n              </form>\n            </div>\n          </div>\n\n          <div className={classes.leftbox}>\n            <img className={classes.logo} src={logo} alt=\"logo\" />\n            <h2 className={classes.title}>\n              <span className={classes.firstSpan}>Rapptr</span>\n              <span> </span>\n              <span className={classes.secondSpan}>Labs</span>\n            </h2>\n            <p className={classes.leftboxText}>From Idea to Adoption.</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n"],"mappings":"iPAAA,MAAOA,MAAK,EAAIC,MAAM,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC1D,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,OAAO,KAAQ,iBAAiB,CACzC,MAAOC,QAAO,KAAM,2BAA2B,CAC/C,MAAOC,KAAI,KAAM,oBAAoB,CACrC,OAASC,eAAe,KAAQ,gCAAgC,CAChE,OAASC,MAAM,CAAEC,MAAM,KAAQ,mCAAmC,CAClE,MAAOC,MAAK,KAAM,OAAO,CAAC,wFAE1B,GAAMC,MAAK,CAAG,QAARA,MAAK,EAAS,CAClB;AACA,cAAwBV,QAAQ,CAAC,KAAK,CAAC,wCAAhCW,IAAI,eAAEC,OAAO,eACpB,eAAgCZ,QAAQ,CAAC,IAAI,CAAC,yCAAvCa,QAAQ,eAAEC,WAAW,eAC5B,eAAsCd,QAAQ,CAAC,IAAI,CAAC,yCAA7Ce,WAAW,eAAEC,cAAc,eAClC,eAAgChB,QAAQ,CAAC,IAAI,CAAC,yCAAvCiB,QAAQ,eAAEC,WAAW,eAE5B,GAAMC,QAAO,CAAGpB,MAAM,EAAE,CACxB,GAAMqB,SAAQ,CAAGlB,WAAW,EAAE,CAE9B,GAAMmB,SAAQ,cAAG,KAAC,eAAe,EAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAEd,MAAO,EAAG,CAC5D,GAAMe,SAAQ,cAAG,KAAC,eAAe,EAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAEd,MAAO,EAAG,CAE5DP,SAAS,CAAC,UAAM,CACd,GAAMsB,OAAM,CAAGC,YAAY,CAACC,OAAO,CAAC,YAAY,CAAC,CACjD;AACAF,MAAM,EAAIH,QAAQ,CAAC,OAAO,CAAC,CAC7B,CAAC,CAAE,CAACA,QAAQ,CAAC,CAAC,CAEd,aAAmCjB,OAAO,EAAE,CAApCuB,QAAQ,UAARA,QAAQ,CAAEC,YAAY,UAAZA,YAAY,CAE9B,GAAMC,SAAQ,CAAG,QAAXA,SAAQ,CAAIC,IAAI,CAAK,CACzBjB,OAAO,CAAC,IAAI,CAAC,CACbH,KAAK,CAAC,CACJqB,MAAM,CAAE,MAAM,CACdC,GAAG,CAAE,wDAAwD,CAC7DF,IAAI,CAAE,CACJG,KAAK,CAAEH,IAAI,CAACG,KAAK,CACjBC,QAAQ,CAAEJ,IAAI,CAACI,QACjB,CAAC,CACDC,OAAO,CAAE,CAAE,cAAc,CAAE,mCAAoC,CACjE,CAAC,CAAC,CACCC,IAAI,CAAC,SAAUC,QAAQ,CAAE,CACxBxB,OAAO,CAAC,KAAK,CAAC,CACdY,YAAY,CAACa,OAAO,CAAC,YAAY,CAAED,QAAQ,CAACP,IAAI,CAACS,UAAU,CAAC,CAC5DlB,QAAQ,CAAC,OAAO,CAAC,CACnB,CAAC,CAAC,CACDmB,KAAK,CAAC,SAAUC,KAAK,CAAE,CACtBtB,WAAW,CAAC,qBAAqB,CAAC,CAClCN,OAAO,CAAC,KAAK,CAAC,CAChB,CAAC,CAAC,CACN,CAAC,CAED,mBACE,YAAK,SAAS,CAAER,OAAO,CAACqC,aAAc,uBACpC,YAAK,SAAS,CAAErC,OAAO,CAACsC,SAAU,uBAChC,aAAK,SAAS,CAAEtC,OAAO,CAACuC,OAAQ,wBAC9B,aAAK,SAAS,CAAEvC,OAAO,CAACwC,SAAU,wBAChC,+BAAgB,cAChB,YAAK,SAAS,CAAExC,OAAO,CAACyC,aAAc,uBACpC,cACE,QAAQ,CAAElB,YAAY,CAACC,QAAQ,CAAE,CACjC,QAAQ,CAAE,kBAACkB,CAAC,CAAK,CACf,GAAIA,CAAC,CAACC,MAAM,CAACC,EAAE,GAAK,OAAO,CAAE,CAC3B,GAAIC,WAAU,CACZ,sEAAsE,CACxE,GACEH,CAAC,CAACC,MAAM,CAACG,KAAK,CAACC,MAAM,CAAG,EAAE,EAC1B,CAACL,CAAC,CAACC,MAAM,CAACG,KAAK,CAACE,KAAK,CAACH,UAAU,CAAC,CACjC,CACAnC,WAAW,CAAC,eAAe,CAAC,CAC9B,CAAC,IAAM,CACLA,WAAW,CAAC,IAAI,CAAC,CACnB,CACF,CAAC,IAAM,IAAIgC,CAAC,CAACC,MAAM,CAACC,EAAE,GAAK,UAAU,CAAE,CACrC,GACEF,CAAC,CAACC,MAAM,CAACG,KAAK,CAACC,MAAM,CAAG,CAAC,EACzBL,CAAC,CAACC,MAAM,CAACG,KAAK,CAACC,MAAM,CAAG,EAAE,CAC1B,CACAnC,cAAc,CACZ,0CAA0C,CAC3C,CACH,CAAC,IAAM,CACLA,cAAc,CAAC,IAAI,CAAC,CACtB,CACF,CACF,CAAE,wBAEF,cAAO,OAAO,CAAC,OAAO,mBAAc,cACpC,aAAK,SAAS,CAAEZ,OAAO,CAACiD,SAAU,wBAChC,aAAM,SAAS,CAAEjD,OAAO,CAACkD,SAAU,UAAEjC,QAAQ,EAAQ,cACrD,4BACE,IAAI,CAAC,OAAO,CACZ,WAAW,CAAC,qBAAqB,CACjC,EAAE,CAAC,OAAO,CACV,GAAG,CAAEF,OAAQ,CACb,YAAY,CAAC,KAAK,CAClB,SAAS,CAAEN,QAAQ,EAAI,SAAU,EAC7Ba,QAAQ,CAAC,OAAO,CAAE,CACpB6B,QAAQ,CAAE,IAAI,CACdC,SAAS,CAAE,CACTN,KAAK,CAAE,EACT,CACF,CAAC,CAAC,EACF,GACE,CACLrC,QAAQ,eAAI,UAAG,SAAS,CAAET,OAAO,CAACqD,MAAO,UAAE5C,QAAQ,EAAK,cAEzD,cAAO,OAAO,CAAC,UAAU,sBAAiB,cAC1C,aAAK,SAAS,CAAET,OAAO,CAACiD,SAAU,wBAChC,aAAM,SAAS,CAAEjD,OAAO,CAACkD,SAAU,UAAEhC,QAAQ,EAAQ,cACrD,4BACE,IAAI,CAAC,UAAU,CACf,WAAW,CAAC,+BAA+B,CAC3C,EAAE,CAAC,UAAU,CACb,GAAG,CAAEH,OAAQ,CACb,YAAY,CAAC,KAAK,CAClB,SAAS,CAAEJ,WAAW,EAAI,SAAU,EAChCW,QAAQ,CAAC,UAAU,CAAE,CACvB6B,QAAQ,CAAE,IAAI,CACdG,SAAS,CAAE,CACTR,KAAK,CAAE,CACT,CAAC,CACDM,SAAS,CAAE,CACTN,KAAK,CAAE,EACT,CACF,CAAC,CAAC,EACF,GACE,CACLnC,WAAW,eAAI,UAAG,SAAS,CAAEX,OAAO,CAACqD,MAAO,UAAE1C,WAAW,EAAK,CAE9DE,QAAQ,eAAI,UAAG,SAAS,CAAEb,OAAO,CAACqD,MAAO,UAAExC,QAAQ,EAAK,cACzD,eACE,SAAS,CACPJ,QAAQ,EAAIE,WAAW,EAAIJ,IAAI,CAAG,gBAAgB,CAAG,EACtD,CACD,QAAQ,CAAEE,QAAQ,EAAIE,WAAW,EAAIJ,IAAI,CAAG,IAAI,CAAG,KAAM,mBAGlD,GACJ,EACH,GACF,cAEN,aAAK,SAAS,CAAEP,OAAO,CAACuD,OAAQ,wBAC9B,YAAK,SAAS,CAAEvD,OAAO,CAACC,IAAK,CAAC,GAAG,CAAEA,IAAK,CAAC,GAAG,CAAC,MAAM,EAAG,cACtD,YAAI,SAAS,CAAED,OAAO,CAACwD,KAAM,wBAC3B,aAAM,SAAS,CAAExD,OAAO,CAACyD,SAAU,oBAAc,cACjD,2BAAc,cACd,aAAM,SAAS,CAAEzD,OAAO,CAAC0D,UAAW,kBAAY,GAC7C,cACL,UAAG,SAAS,CAAE1D,OAAO,CAAC2D,WAAY,oCAA2B,GACzD,GACF,EACF,EACF,CAEV,CAAC,CAED,cAAerD,MAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}